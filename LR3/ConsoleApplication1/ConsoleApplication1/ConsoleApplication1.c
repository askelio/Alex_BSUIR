
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <conio.h>
#include <time.h>



void show_field()
{

    //field
    char field[22][22] =
    {

        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
        {'|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|',' ','|'},
        {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},

    };



    
    int x, y;


    int i = 10;
    char a;

    //array that contain cooedinates of all ships
    int coord[10][10];

    srand(time(NULL));

        while (i != 0)
        {
            x = rand() % 10;
            y = rand() % 10;

//first ship
            if (i == 10)
            {
                if (x <= 6)
                {
                    coord[x][y] = 1;
                    coord[x + 1][y] = 1;
                    coord[x + 2][y] = 1;
                    coord[x + 3][y] = 1;
                    i--;
                    if (x > 0)
                    {
                        coord[x - 1][y] = 0;
                    }
                    if (x < 6)
                    {
                        coord[x + 4][y] = 0;
                    }
                    if (y > 0)
                    {
                        coord[x][y - 1] = 0;
                        coord[x + 1][y - 1] = 0;
                        coord[x + 2][y - 1] = 0;
                        coord[x + 3][y - 1] = 0;
                    }
                    if (y < 9)
                    {
                        coord[x][y + 1] = 0;
                        coord[x + 1][y + 1] = 0;
                        coord[x + 2][y + 1] = 0;
                        coord[x + 3][y + 1] = 0;
                    }
                    if (x > 0 && y > 0)
                    {
                        coord[x - 1][y - 1] = 0;
                    }
                    if (x < 6 && y > 0)
                    {
                        coord[x + 4][y - 1] = 0;
                    }
                    if (x < 6 && y < 9)
                    {
                        coord[x + 4][y + 1] = 0;
                    }
                    if (x > 0 && y < 9)
                    {
                        coord[x - 1][y + 1] = 0;
                    }

                }
                continue;
            }
            
 //second ship

            if (i == 9 || i == 8)
            {
                if (x <= 7 && coord[x][y] != 0 && coord[x + 1][y] != 0 && coord[x + 2][y] != 0
                           && coord[x][y] != 1 && coord[x + 1][y] != 1 && coord[x + 2][y] != 1 )
                {
                    coord[x][y] = 1;
                    coord[x + 1][y] = 1;
                    coord[x + 2][y] = 1;

                    i--;
                    if (x > 0)
                    {
                        coord[x - 1][y] = 0;
                    }
                    if (x < 7)
                    {
                        coord[x + 3][y] = 0;
                    }
                    if (y > 0)
                    {
                        coord[x][y - 1] = 0;
                        coord[x + 1][y - 1] = 0;
                        coord[x + 2][y - 1] = 0;

                    }
                    if (y < 9)
                    {
                        coord[x][y + 1] = 0;
                        coord[x + 1][y + 1] = 0;
                        coord[x + 2][y + 1] = 0;

                    }
                    if (x > 0 && y > 0)
                    {
                        coord[x - 1][y - 1] = 0;
                    }
                    if (x < 7 && y > 0)
                    {
                        coord[x + 3][y - 1] = 0;
                    }
                    if (x < 7 && y < 9)
                    {
                        coord[x + 3][y + 1] = 0;
                    }
                    if (x > 0 && y < 9)
                    {
                        coord[x - 1][y + 1] = 0;
                    }
                }
                continue;
            }

 //third ship

            if (i == 7 || i == 6 || i == 5)
            {
                if (x <= 8 && coord[x][y] != 0 && coord[x + 1][y] != 0
                           && coord[x][y] != 1 && coord[x + 1][y] != 1)
                {
                    coord[x][y] = 1;
                    coord[x + 1][y] = 1;


                    i--;
                    if (x > 0)
                    {
                        coord[x - 1][y] = 0;
                    }
                    if (x < 8)
                    {
                        coord[x + 2][y] = 0;
                    }
                    if (y > 0)
                    {
                        coord[x][y - 1] = 0;
                        coord[x + 1][y - 1] = 0;

                    }
                    if (y < 9)
                    {
                        coord[x][y + 1] = 0;
                        coord[x + 1][y + 1] = 0;


                    }
                    if (x > 0 && y > 0)
                    {
                        coord[x - 1][y - 1] = 0;
                    }
                    if (x < 8 && y > 0)
                    {
                        coord[x + 2][y - 1] = 0;
                    }
                    if (x < 8 && y < 9)
                    {
                        coord[x + 2][y + 1] = 0;
                    }
                    if (x > 0 && y < 9)
                    {
                        coord[x - 1][y + 1] = 0;
                    }
                }
                continue;
            }
            
 //fourth ship

            if (i == 4 || i == 3 || i == 2 || i == 1)
            {
                if (x <= 9 && coord[x][y] != 0 && coord[x][y] != 1)
                {
                    coord[x][y] = 1;
                    i--;


                    if (x > 0)
                    {
                        coord[x - 1][y] = 0;
                    }
                    if (x < 9)
                    {
                        coord[x + 1][y] = 0;
                    }
                    if (y > 0)
                    {
                        coord[x][y - 1] = 0;

                    }
                    if (y < 9)
                    {
                        coord[x][y + 1] = 0;
                    }
                    if (x > 0 && y > 0)
                    {
                        coord[x - 1][y - 1] = 0;
                    }
                    if (x < 9 && y > 0)
                    {
                        coord[x + 1][y - 1] = 0;
                    }
                    if (x < 9 && y < 9)
                    {
                        coord[x + 1][y + 1] = 0;
                    }
                    if (x > 0 && y < 9)
                    {
                        coord[x - 1][y + 1] = 0;
                    }

                }
                continue;
            }
            
        }

//printing main field and shipds

        for (int i = 0; i < 22; i++)
        {

            for (int j = 0; j < 22; j++)
            {

                
                if (field[i][j] == ' ' && coord[(j - 1) / 2][(i - 1) / 2] == 1)
                {
                    
                    printf("#");                    
                }
                
                else
                {
                    
                    printf("%c", field[i][j]);
                }
            }
            printf("\n");
        } 

    
}  




int main()
{
    while (1)
    {

        
        printf("Make double-click on any button to re-arrange the ships or press 'S' to end the program\n");
        show_field();
        if (_getch() == 's' || _getch() == 'S')
        {
            break;
        }
        else
        {
            system("cls");
            continue;
        }
    }
}

